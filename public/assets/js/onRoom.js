const userTemplate = document.querySelector('#user-template').innerHTML
const sidebar = document.querySelector('#sidebar')

const emojis = [
    'ðŸ˜€', 'ðŸ˜', 'ðŸ˜‚', 'ðŸ˜„', 'ðŸ˜…', 'ðŸ˜†', 'ðŸ˜‡', 'ðŸ˜ˆ',
    'ðŸ˜‰', 'ðŸ˜Š', 'ðŸ˜‹', 'ðŸ˜Œ', 'ðŸ˜', 'ðŸ˜Ž', 'ðŸ˜', 'ðŸ˜',
    'ðŸ˜‘', 'ðŸ˜’', 'ðŸ˜“', 'ðŸ˜”', 'ðŸ˜•', 'ðŸ˜–', 'ðŸ˜—', 'ðŸ˜˜',
    'ðŸ˜™', 'ðŸ˜š', 'ðŸ˜›', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ˜ž', 'ðŸ˜Ÿ', 'ðŸ˜ ',
    'ðŸ˜¡', 'ðŸ˜¢', 'ðŸ˜£', 'ðŸ˜¤', 'ðŸ˜¥', 'ðŸ˜¦', 'ðŸ˜§', 'ðŸ˜¨',
    'ðŸ˜©', 'ðŸ˜ª', 'ðŸ˜«', 'ðŸ˜¬', 'ðŸ˜­', 'ðŸ˜®', 'ðŸ˜¯', 'ðŸ˜°',
    'ðŸ˜±', 'ðŸ˜²', 'ðŸ˜³', 'ðŸ˜´', 'ðŸ˜µ', 'ðŸ˜¶', 'ðŸ˜·', 'ðŸ˜¸',
    'ðŸ˜¹', 'ðŸ˜º', 'ðŸ˜»', 'ðŸ˜¼', 'ðŸ˜½', 'ðŸ˜¾', 'ðŸ˜¿', 'ðŸ™€',
    'ðŸ™', 'ðŸ™‚', 'ðŸ™ƒ', 'ðŸ™„'
]

socket.on('onRoom', eventData => {
    const { users, room } = eventData
    const exisitingElement = document.querySelector('#user-template-container')

    if (exisitingElement) { sidebar.removeChild(exisitingElement) }

    const randomInd = Math.floor(Math.random() * ((emojis.length - 1) - 0 + 1)) + 0;

    const html = Mustache.render(userTemplate, { users, room, emoji: emojis[randomInd] })

    sidebar.insertAdjacentHTML('beforeend', html)
})